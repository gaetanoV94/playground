!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.SockJS=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
"use strict";function AbstractXHRObject(){}var EventEmitter=_dereq_("./eventemitter"),utils=_dereq_("./utils");AbstractXHRObject.prototype=new EventEmitter(["chunk","finish"]),AbstractXHRObject.prototype._start=function(t,e,r,n){var a=this;try{a.xhr=new XMLHttpRequest}catch(c){}if(!a.xhr)try{a.xhr=new window.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}(window.ActiveXObject||window.XDomainRequest)&&(e+=(-1===e.indexOf("?")?"?":"&")+"t="+ +new Date),a.unload_ref=utils.unload_add(function(){a._cleanup(!0)});try{a.xhr.open(t,e,!0)}catch(i){return a.emit("finish",0,""),void a._cleanup()}if(n&&n.no_credentials||(a.xhr.withCredentials="true"),n&&n.headers)for(var s in n.headers)a.xhr.setRequestHeader(s,n.headers[s]);a.xhr.onreadystatechange=function(){if(a.xhr){var t,e,r=a.xhr;switch(r.readyState){case 3:try{e=r.status,t=r.responseText}catch(n){}1223===e&&(e=204),t&&t.length>0&&a.emit("chunk",e,t);break;case 4:e=r.status,1223===e&&(e=204),a.emit("finish",e,r.responseText),a._cleanup(!1)}}},a.xhr.send(r)},AbstractXHRObject.prototype._cleanup=function(t){var e=this;if(e.xhr){if(utils.unload_del(e.unload_ref),e.xhr.onreadystatechange=function(){},t)try{e.xhr.abort()}catch(r){}e.unload_ref=e.xhr=null}},AbstractXHRObject.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)},module.exports=AbstractXHRObject;

},{"./eventemitter":4,"./utils":28}],2:[function(_dereq_,module,exports){
"use strict";function AjaxBasedTransport(){}function createAjaxSender(e){return function(r,n,t){var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var a=new e("POST",r+"/xhr_send",n,o);return a.onfinish=function(e){t(200===e||204===e,"http status "+e)},function(e){t(!1,e)}}}var BufferedSender=_dereq_("./buffered-sender"),Polling=_dereq_("./trans-polling");AjaxBasedTransport.prototype=new BufferedSender,AjaxBasedTransport.prototype.run=function(e,r,n,t,o){var a=this;a.ri=e,a.trans_url=r,a.send_constructor(createAjaxSender(o)),a.poll=new Polling(e,t,r+n,o)},AjaxBasedTransport.prototype.doCleanup=function(){var e=this;e.poll&&(e.poll.abort(),e.poll=null)},module.exports=AjaxBasedTransport;

},{"./buffered-sender":3,"./trans-polling":19}],3:[function(_dereq_,module,exports){
"use strict";function BufferedSender(){}var utils=_dereq_("./utils");BufferedSender.prototype.send_constructor=function(e){var n=this;n.send_buffer=[],n.sender=e},BufferedSender.prototype.doSend=function(e){var n=this;n.send_buffer.push(e),n.send_stop||n.send_schedule()},BufferedSender.prototype.send_schedule_wait=function(){var e,n=this;n.send_stop=function(){n.send_stop=null,clearTimeout(e)},e=utils.delay(25,function(){n.send_stop=null,n.send_schedule()})},BufferedSender.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var n="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,n,function(n,s){e.send_stop=null,n===!1?e.ri._didClose(1006,"Sending error "+s):e.send_schedule_wait()}),e.send_buffer=[]}},BufferedSender.prototype.send_destructor=function(){var e=this;e._send_stop&&e._send_stop(),e._send_stop=null},module.exports=BufferedSender;

},{"./utils":28}],4:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./utils"),JSON3=_dereq_("json3"),EventEmitter=function(e){var t=this;t._events=e||[],t._listeners={}};EventEmitter.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var n=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,n),e in t._listeners)for(var i=0;i<t._listeners[e].length;i++)t._listeners[e][i].apply(t,n)}},EventEmitter.prototype.on=function(e,t){var n=this;n._verifyType(e),n._nuked||(e in n._listeners||(n._listeners[e]=[]),n._listeners[e].push(t))},EventEmitter.prototype._verifyType=function(e){var t=this;-1===utils.arrIndexOf(t._events,e)&&utils.log("Event "+JSON3.stringify(e)+" not listed "+JSON3.stringify(t._events)+" in "+t)},EventEmitter.prototype.nuke=function(){var e=this;e._nuked=!0;for(var t=0;t<e._events.length;t++)delete e[e._events[t]];e._listeners={}},module.exports=EventEmitter;

},{"./utils":28,"json3":33}],5:[function(_dereq_,module,exports){
"use strict";function FacadeJS(){}var utils=_dereq_("./utils");FacadeJS.prototype._didClose=function(t,e){utils.postMessage("t",utils.closeFrame(t,e))},FacadeJS.prototype._didMessage=function(t){utils.postMessage("t",t)},FacadeJS.prototype._doSend=function(t){this._transport.doSend(t)},FacadeJS.prototype._doCleanup=function(){this._transport.doCleanup()},module.exports=FacadeJS;

},{"./utils":28}],6:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./utils"),EventEmitter=_dereq_("./eventemitter"),InfoReceiverFake=function(){var e=this;utils.delay(function(){e.emit("finish",{},2e3)})};InfoReceiverFake.prototype=new EventEmitter(["finish"]),module.exports=InfoReceiverFake;

},{"./eventemitter":4,"./utils":28}],7:[function(_dereq_,module,exports){
"use strict";function InfoReceiverIframe(e){var r=this,t=function(){var t=new IframeTransport;t.protocol="w-iframe-info-receiver";var i=function(e){if("string"==typeof e&&"m"===e.substr(0,1)){var i=JSON3.parse(e.substr(1)),n=i[0],o=i[1];r.emit("finish",n,o)}else r.emit("finish");t.doCleanup(),t=null},n={_didClose:i,_didMessage:i};t.i_constructor(n,e,e)};document.body?t():utils.attachEvent("load",t)}var utils=_dereq_("./utils"),EventEmitter=_dereq_("./eventemitter"),IframeTransport=_dereq_("./trans-iframe"),JSON3=_dereq_("json3");InfoReceiverIframe.prototype=new EventEmitter(["finish"]),module.exports=InfoReceiverIframe;

},{"./eventemitter":4,"./trans-iframe":17,"./utils":28,"json3":33}],8:[function(_dereq_,module,exports){
"use strict";function InfoReceiver(e,i){var t=this;utils.delay(function(){t.doXhr(e,i)})}var utils=_dereq_("./utils"),EventEmitter=_dereq_("./eventemitter"),JSON3=_dereq_("json3");InfoReceiver.prototype=new EventEmitter(["finish"]),InfoReceiver.prototype.doXhr=function(e,i){var t=this,n=(new Date).getTime(),o=new i("GET",e+"/info"),r=utils.delay(8e3,function(){o.ontimeout()});o.onfinish=function(e,i){if(clearTimeout(r),r=null,200===e){var o,f=(new Date).getTime()-n;if(i)try{o=JSON3.parse(i)}catch(u){}"object"!=typeof o&&(o={}),t.emit("finish",o,f)}else t.emit("finish")},o.ontimeout=function(){o.close(),t.emit("finish")}},module.exports=InfoReceiver;

},{"./eventemitter":4,"./utils":28,"json3":33}],9:[function(_dereq_,module,exports){
"use strict";var utils=_dereq_("./utils"),REventTarget=function(){};REventTarget.prototype.addEventListener=function(t,e){this._listeners||(this._listeners={}),t in this._listeners||(this._listeners[t]=[]);var s=this._listeners[t];-1===utils.arrIndexOf(s,e)&&(s=s.concat([e])),this._listeners[t]=s},REventTarget.prototype.removeEventListener=function(t,e){if(this._listeners&&t in this._listeners){var s=this._listeners[t],i=utils.arrIndexOf(s,e);return-1!==i?void(s.length>1?this._listeners[t]=s.slice(0,i).concat(s.slice(i+1)):delete this._listeners[t]):void 0}},REventTarget.prototype.dispatchEvent=function(t){var e=t.type,s=Array.prototype.slice.call(arguments,0);if(this["on"+e]&&this["on"+e].apply(this,s),this._listeners&&e in this._listeners)for(var i=this._listeners[e],n=0;n<i.length;n++)i[n].apply(this,s)},module.exports=REventTarget;

},{"./utils":28}],10:[function(_dereq_,module,exports){
"use strict";var SimpleEvent=function(t,i){if(this.type=t,"undefined"!=typeof i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n])};SimpleEvent.prototype.toString=function(){var t=[];for(var i in this)if(this.hasOwnProperty(i)){var n=this[i];"function"==typeof n&&(n="[function]"),t.push(i+"="+n)}return"SimpleEvent("+t.join(", ")+")"},module.exports=SimpleEvent;

},{}],11:[function(_dereq_,module,exports){
"use strict";function SockJS(e,r,t){if(!(this instanceof SockJS))return new SockJS(e,r,t);var o=this;o._base_url=utils.amendUrl(e),t=t||{},o._server="server"in t?t.server:utils.random_number_string(1e3),o._devel="devel"in t?t.devel:!1,o._debug="debug"in t?t.debug:!1,o._protocols_whitelist=t.protocols_whitelist&&t.protocols_whitelist.length?utils.isArray(t.protocols_whitelist)?t.protocols_whitelist:[t.protocols_whitelist]:[],o._protocols=[],o.protocol=null,o.readyState=SockJS.CONNECTING,o._ir=createInfoReceiver(o._base_url),o._ir.onfinish=function(e,r){o._ir=null,e?(o._applyInfo(e,r,o._protocols_whitelist),o._didClose()):o._didClose(1002,"Can't connect to server",!0)}}function createInfoReceiver(e){return utils.isSameOriginUrl(e)?new InfoReceiver(e,XHRCorsObject):utils.isXHRCorsCapable()?new InfoReceiver(e,XHRLocalObject):XDRPolling.enabled(e)?new InfoReceiver(e,XDRObject):IframeTransport.enabled()?new InfoReceiverIframe(e):new InfoReceiverFake}var utils=_dereq_("./utils"),REventTarget=_dereq_("./reventtarget"),SimpleEvent=_dereq_("./simpleevent"),InfoReceiver=_dereq_("./info-receiver"),InfoReceiverIframe=_dereq_("./info-receiver-iframe"),InfoReceiverFake=_dereq_("./info-receiver-fake"),FacadeJS=_dereq_("./facade"),JSON3=_dereq_("json3"),XHRLocalObject=_dereq_("./xhr-local"),XHRCorsObject=_dereq_("./xhr-cors"),XDRObject=_dereq_("./xdr"),XDRPolling=_dereq_("./trans-xdr-polling"),IframeTransport=_dereq_("./trans-iframe");SockJS.prototype=new REventTarget,SockJS.version="1.0.0-alpha1",SockJS.prototype.CONNECTING=SockJS.CONNECTING=0,SockJS.prototype.OPEN=SockJS.OPEN=1,SockJS.prototype.CLOSING=SockJS.CLOSING=2,SockJS.prototype.CLOSED=SockJS.CLOSED=3,SockJS.prototype._log=function(){this._debug&&utils.log.apply(utils,arguments)},SockJS.prototype._dispatchOpen=function(){var e=this;e.readyState===SockJS.CONNECTING?(e._transport_tref&&(clearTimeout(e._transport_tref),e._transport_tref=null),e.readyState=SockJS.OPEN,e.dispatchEvent(new SimpleEvent("open"))):e._didClose(1006,"Server lost session")},SockJS.prototype._dispatchMessage=function(e){var r=this;r.readyState===SockJS.OPEN&&r.dispatchEvent(new SimpleEvent("message",{data:e}))},SockJS.prototype._dispatchHeartbeat=function(){var e=this;e.readyState===SockJS.OPEN&&e.dispatchEvent(new SimpleEvent("heartbeat",{}))},SockJS.prototype._didClose=function(e,r,t){var o=this;if(o.readyState!==SockJS.CONNECTING&&o.readyState!==SockJS.OPEN&&o.readyState!==SockJS.CLOSING)throw new Error("INVALID_STATE_ERR");o._ir&&(o._ir.nuke(),o._ir=null),o._transport&&(o._transport.doCleanup(),o._transport=null);var i=new SimpleEvent("close",{code:e,reason:r,wasClean:utils.userSetCode(e)});if(!utils.userSetCode(e)&&o.readyState===SockJS.CONNECTING&&!t){if(o._try_next_protocol(i))return;i=new SimpleEvent("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:i})}o.readyState=SockJS.CLOSED,utils.delay(function(){o.dispatchEvent(i)})},SockJS.prototype._didMessage=function(e){var r,t=this,o=e.slice(0,1);switch(o){case"o":t._dispatchOpen();break;case"a":r=JSON3.parse(e.slice(1)||"[]");for(var i=0;i<r.length;i++)t._dispatchMessage(r[i]);break;case"m":r=JSON3.parse(e.slice(1)||"null"),t._dispatchMessage(r);break;case"c":r=JSON3.parse(e.slice(1)||"[]"),t._didClose(r[0],r[1]);break;case"h":t._dispatchHeartbeat()}},SockJS.prototype._try_next_protocol=function(e){function r(){o.readyState===SockJS.CONNECTING&&o._didClose(2007,"Transport timed out")}function t(){o._try_next_protocol()}var o=this;for(o.protocol&&(o._log("Closed transport:",o.protocol,""+e),o.protocol=null),o._transport_tref&&(clearTimeout(o._transport_tref),o._transport_tref=null);;){var i=o.protocol=o._protocols.shift();if(!i)return!1;if(SockJS[i]&&SockJS[i].need_body===!0&&(!document.body||"undefined"!=typeof document.readyState&&"complete"!==document.readyState))return o._protocols.unshift(i),o.protocol="waiting-for-load",utils.attachEvent("load",t),!0;if(SockJS[i]&&SockJS[i].enabled(o._base_url)){var a=SockJS[i].roundTrips||1,n=(o._rto||0)*a||5e3;o._transport_tref=utils.delay(n,r);var s=utils.random_string(8),l=o._base_url+"/"+o._server+"/"+s;return o._log("Opening transport:",i," url:"+l," RTO:"+o._rto),o._transport=new SockJS[i](o,l,o._base_url),!0}o._log("Skipping transport:",i)}},SockJS.prototype.close=function(e,r){var t=this;if(e&&!utils.userSetCode(e))throw new Error("INVALID_ACCESS_ERR");return t.readyState!==SockJS.CONNECTING&&t.readyState!==SockJS.OPEN?!1:(t.readyState=SockJS.CLOSING,t._didClose(e||1e3,r||"Normal closure"),!0)},SockJS.prototype.send=function(e){var r=this;if(r.readyState===SockJS.CONNECTING)throw new Error("INVALID_STATE_ERR");return r.readyState===SockJS.OPEN&&r._transport.doSend(utils.quote(""+e)),!0},SockJS.prototype._applyInfo=function(e,r,t){var o=this;o._rtt=r,o._rto=utils.countRTO(r),e.null_origin=!document.domain,e.base_url&&(o._base_url=utils.amendUrl(e.base_url));var i=utils.probeProtocols(o._base_url);o._protocols=utils.detectProtocols(i,t,e)},utils.parent_origin=void 0,SockJS.bootstrap_iframe=function(){var e;utils.curr_window_id=document.location.hash.slice(1);var r=function(r){if(r.source===parent&&("undefined"==typeof utils.parent_origin&&(utils.parent_origin=r.origin),r.origin===utils.parent_origin)){var t=r.data.slice(0,8),o=r.data.slice(8,9),i=r.data.slice(9);if(t===utils.curr_window_id)switch(o){case"s":var a=JSON3.parse(i),n=a[0],s=a[1],l=a[2],c=a[3];if(n!==SockJS.version&&utils.log('Incompatibile SockJS! Main site uses: "'+n+'", the iframe: "'+SockJS.version+'".'),!utils.flatUrl(l)||!utils.flatUrl(c))return void utils.log("Only basic urls are supported in SockJS");if(!utils.isSameOriginUrl(l)||!utils.isSameOriginUrl(c))return void utils.log("Can't connect to different domain from within an iframe. ("+JSON3.stringify([window.location.href,l,c])+")");e=new FacadeJS,e._transport=new FacadeJS[s](e,l,c);break;case"m":e._doSend(i);break;case"c":e&&e._doCleanup(),e=null}}};utils.attachMessage(r),utils.postMessage("s")},SockJS.websocket=_dereq_("./trans-websocket"),SockJS["iframe-eventsource"]=_dereq_("./trans-iframe-eventsource"),SockJS["iframe-htmlfile"]=_dereq_("./trans-iframe-htmlfile"),SockJS["iframe-xhr-polling"]=_dereq_("./trans-iframe-xhr-polling"),SockJS["jsonp-polling"]=_dereq_("./trans-jsonp-polling"),SockJS["xdr-polling"]=XDRPolling,SockJS["xdr-streaming"]=_dereq_("./trans-xdr-streaming"),SockJS["xhr-polling"]=_dereq_("./trans-xhr-polling"),SockJS["xhr-streaming"]=_dereq_("./trans-xhr-streaming"),module.exports=SockJS,FacadeJS["w-iframe-info-receiver"]=_dereq_("./info-receiver-iframe"),FacadeJS["w-iframe-eventsource"]=_dereq_("./trans-eventsource"),FacadeJS["w-iframe-htmlfile"]=_dereq_("./trans-htmlfile"),FacadeJS["w-iframe-xhr-polling"]=_dereq_("./xhr-polling-iframe"),SockJS.getUtils=function(){return utils},"_sockjs_onload"in window&&setTimeout(window._sockjs_onload,1);

},{"./facade":5,"./info-receiver":8,"./info-receiver-fake":6,"./info-receiver-iframe":7,"./reventtarget":9,"./simpleevent":10,"./trans-eventsource":12,"./trans-htmlfile":13,"./trans-iframe":17,"./trans-iframe-eventsource":14,"./trans-iframe-htmlfile":15,"./trans-iframe-xhr-polling":16,"./trans-jsonp-polling":18,"./trans-websocket":23,"./trans-xdr-polling":24,"./trans-xdr-streaming":25,"./trans-xhr-polling":26,"./trans-xhr-streaming":27,"./utils":28,"./xdr":29,"./xhr-cors":30,"./xhr-local":31,"./xhr-polling-iframe":32,"json3":33}],12:[function(_dereq_,module,exports){
"use strict";function EventSourceTransport(e,r){this.run(e,r,"/eventsource",EventSourceReceiver,XHRLocalObject)}var AjaxBasedTransport=_dereq_("./ajax-based"),EventSourceReceiver=_dereq_("./trans-receiver-eventsource"),XHRLocalObject=_dereq_("./xhr-local");EventSourceTransport.prototype=new AjaxBasedTransport,module.exports=EventSourceTransport;

},{"./ajax-based":2,"./trans-receiver-eventsource":20,"./xhr-local":31}],13:[function(_dereq_,module,exports){
"use strict";function HtmlFileTransport(e,r){this.run(e,r,"/htmlfile",HtmlfileReceiver,XHRLocalObject)}var HtmlfileReceiver=_dereq_("./trans-receiver-htmlfile"),XHRLocalObject=_dereq_("./xhr-local"),AjaxBasedTransport=_dereq_("./ajax-based");HtmlFileTransport.prototype=new AjaxBasedTransport,module.exports=HtmlFileTransport;

},{"./ajax-based":2,"./trans-receiver-htmlfile":21,"./xhr-local":31}],14:[function(_dereq_,module,exports){
"use strict";function EventSourceIframeTransport(){var r=this;r.protocol="w-iframe-eventsource",r.i_constructor.apply(r,arguments)}var IframeTransport=_dereq_("./trans-iframe");EventSourceIframeTransport.prototype=new IframeTransport,EventSourceIframeTransport.enabled=function(){return"EventSource"in window&&IframeTransport.enabled()},EventSourceIframeTransport.need_body=!0,EventSourceIframeTransport.roundTrips=3,module.exports=EventSourceIframeTransport;

},{"./trans-iframe":17}],15:[function(_dereq_,module,exports){
"use strict";function HtmlFileIframeTransport(){var r=this;r.protocol="w-iframe-htmlfile",r.i_constructor.apply(r,arguments)}var IframeTransport=_dereq_("./trans-iframe");HtmlFileIframeTransport.prototype=new IframeTransport,HtmlFileIframeTransport.enabled=function(){return IframeTransport.enabled()},HtmlFileIframeTransport.need_body=!0,HtmlFileIframeTransport.roundTrips=3,module.exports=HtmlFileIframeTransport;

},{"./trans-iframe":17}],16:[function(_dereq_,module,exports){
"use strict";function XhrPollingIframeTransport(){var r=this;r.protocol="w-iframe-xhr-polling",r.i_constructor.apply(r,arguments)}var IframeTransport=_dereq_("./trans-iframe");XhrPollingIframeTransport.prototype=new IframeTransport,XhrPollingIframeTransport.enabled=function(){return window.XMLHttpRequest&&IframeTransport.enabled()},XhrPollingIframeTransport.need_body=!0,XhrPollingIframeTransport.roundTrips=3,module.exports=XhrPollingIframeTransport;

},{"./trans-iframe":17}],17:[function(_dereq_,module,exports){
"use strict";function IframeTransport(){}var JSON3=_dereq_("json3"),utils=_dereq_("./utils");IframeTransport.prototype.i_constructor=function(e,r,i){var s=this;s.ri=e,s.origin=utils.getOrigin(i),s.base_url=i,s.trans_url=r;var t=i+"/iframe.html";s.ri._devel&&(t+="?t="+ +new Date),s.window_id=utils.random_string(8),t+="#"+s.window_id,s.iframeObj=utils.createIframe(t,function(e){s.ri._didClose(1006,"Unable to load an iframe ("+e+")")}),s.onmessage_cb=utils.bind(s.onmessage,s),utils.attachMessage(s.onmessage_cb)},IframeTransport.prototype.doCleanup=function(){var e=this;if(e.iframeObj){utils.detachMessage(e.onmessage_cb);try{e.postMessage("c")}catch(r){}e.iframeObj.cleanup(),e.iframeObj=null,e.onmessage_cb=e.iframeObj=null}},IframeTransport.prototype.onmessage=function(e){var r=this;if(utils.isSameOriginUrl(e.origin,r.origin)){var i=e.data.slice(0,8),s=e.data.slice(8,9),t=e.data.slice(9);if(i!==r.window_id)return console.log("Mismatched window id");switch(s){case"s":r.iframeObj.loaded(),r.postMessage("s",JSON3.stringify([window.SockJS.version,r.protocol,r.trans_url,r.base_url]));break;case"t":r.ri._didMessage(t)}}},IframeTransport.prototype.postMessage=function(e,r){var i=this;i.iframeObj.post(i.window_id+e+(r||""),i.origin)},IframeTransport.prototype.doSend=function(e){this.postMessage("m",e)},IframeTransport.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof window.postMessage||"object"==typeof window.postMessage)&&!e},module.exports=IframeTransport;

},{"./utils":28,"json3":33}],18:[function(_dereq_,module,exports){
"use strict";function JsonPTransport(e,n){utils.polluteGlobalNamespace();var r=this;r.ri=e,r.trans_url=n,r.send_constructor(jsonPGenericSender),r._schedule_recv()}function jsonPGenericSender(e,n,r){var t=window._send_form,o=window._send_area;t||(t=window._send_form=document.createElement("form"),o=window._send_area=document.createElement("textarea"),o.name="d",t.style.display="none",t.style.position="absolute",t.method="POST",t.enctype="application/x-www-form-urlencoded",t.acceptCharset="UTF-8",t.appendChild(o),document.body.appendChild(t));var a="a"+utils.random_string(8);t.target=a,t.action=e+"/jsonp_send?i="+a;var s;try{s=document.createElement('<iframe name="'+a+'">')}catch(i){s=document.createElement("iframe"),s.name=a}s.id=a,t.appendChild(s),s.style.display="none";try{o.value=n}catch(c){utils.log("Your browser is seriously broken. Go home! "+c.message)}t.submit();var l=function(){s.onerror&&(s.onreadystatechange=s.onerror=s.onload=null,utils.delay(500,function(){s.parentNode.removeChild(s),s=null}),o.value="",r(!0))};return s.onerror=s.onload=l,s.onreadystatechange=function(){"complete"==s.readyState&&l()},l}function jsonPGenericReceiver(e,n){var r,t,o=document.createElement("script"),a=function(e){t&&(t.parentNode.removeChild(t),t=null),o&&(clearTimeout(r),o.parentNode.removeChild(o),o.onreadystatechange=o.onerror=o.onload=o.onclick=null,o=null,n(e),n=null)},s=!1,i=null;if(o.id="a"+utils.random_string(8),o.src=e,o.type="text/javascript",o.charset="UTF-8",o.onerror=function(){i||(i=setTimeout(function(){s||a(utils.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},o.onload=function(){a(utils.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},o.onreadystatechange=function(){if(/loaded|closed/.test(o.readyState)){if(o&&o.htmlFor&&o.onclick){s=!0;try{o.onclick()}catch(e){}}o&&a(utils.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof o.async&&document.attachEvent)if(/opera/i.test(navigator.userAgent))t=document.createElement("script"),t.text="try{var a = document.getElementById('"+o.id+"'); if(a)a.onerror();}catch(x){};",o.async=t.async=!1;else{try{o.htmlFor=o.id,o.event="onclick"}catch(c){}o.async=!0}"undefined"!=typeof o.async&&(o.async=!0),r=setTimeout(function(){a(utils.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var l=document.getElementsByTagName("head")[0];return l.insertBefore(o,l.firstChild),t&&l.insertBefore(t,l.firstChild),a}var utils=_dereq_("./utils"),BufferedSender=_dereq_("./buffered-sender");JsonPTransport.prototype=new BufferedSender,JsonPTransport.prototype._schedule_recv=function(){var e=this,n=function(n){e._recv_stop=null,n&&(e._is_closing||e.ri._didMessage(n)),e._is_closing||e._schedule_recv()};e._recv_stop=jsonPReceiverWrapper(e.trans_url+"/jsonp",jsonPGenericReceiver,n)},JsonPTransport.enabled=function(){return!0},JsonPTransport.need_body=!0,JsonPTransport.prototype.doCleanup=function(){var e=this;e._is_closing=!0,e._recv_stop&&e._recv_stop(),e.ri=e._recv_stop=null,e.send_destructor()},module.exports=JsonPTransport;var jsonPReceiverWrapper=function(e,n,r){var t="a"+utils.random_string(6),o=e+"?c="+encodeURIComponent(utils.WPrefix+"."+t),a=0,s=function(e){switch(a){case 0:delete window[utils.WPrefix][t],r(e);break;case 1:r(e),a=2;break;case 2:delete window[utils.WPrefix][t]}},i=n(o,s);window[utils.WPrefix][t]=i;var c=function(){window[utils.WPrefix][t]&&(a=1,window[utils.WPrefix][t](utils.closeFrame(1e3,"JSONP user aborted read")))};return c};

},{"./buffered-sender":3,"./utils":28}],19:[function(_dereq_,module,exports){
"use strict";function Polling(e,o,l,n){var i=this;i.ri=e,i.Receiver=o,i.recv_url=l,i.AjaxObject=n,i._scheduleRecv()}Polling.prototype._scheduleRecv=function(){var e=this,o=e.poll=new e.Receiver(e.recv_url,e.AjaxObject),l=0;o.onmessage=function(o){l+=1,e.ri._didMessage(o.data)},o.onclose=function(l){e.poll=o=o.onmessage=o.onclose=null,e.poll_is_closing||("permanent"===l.reason?e.ri._didClose(1006,"Polling error ("+l.reason+")"):e._scheduleRecv())}},Polling.prototype.abort=function(){var e=this;e.poll_is_closing=!0,e.poll&&e.poll.abort()},module.exports=Polling;

},{}],20:[function(_dereq_,module,exports){
"use strict";function EventSourceReceiver(e){var t=this,r=new EventSource(e);r.onmessage=function(e){t.dispatchEvent(new SimpleEvent("message",{data:decodeURI(e.data)}))},t.es_close=r.onerror=function(e,n){var o=n?"user":2!==r.readyState?"network":"permanent";t.es_close=r.onmessage=r.onerror=null,r.close(),r=null,utils.delay(200,function(){t.dispatchEvent(new SimpleEvent("close",{reason:o}))})}}var SimpleEvent=_dereq_("./simpleevent"),REventTarget=_dereq_("./reventtarget"),utils=_dereq_("./utils");EventSourceReceiver.prototype=new REventTarget,EventSourceReceiver.prototype.abort=function(){var e=this;e.es_close&&e.es_close({},!0)},module.exports=EventSourceReceiver;

},{"./reventtarget":9,"./simpleevent":10,"./utils":28}],21:[function(_dereq_,module,exports){
"use strict";function HtmlfileReceiver(e){var i=this;utils.polluteGlobalNamespace(),i.id="a"+utils.random_string(6),e+=(-1===e.indexOf("?")?"?":"&")+"c="+decodeURIComponent(utils.WPrefix+"."+i.id);var t,l=isIeHtmlfileCapable()?utils.createHtmlfile:utils.createIframe;window[utils.WPrefix][i.id]={start:function(){t.loaded()},message:function(e){i.dispatchEvent(new SimpleEvent("message",{data:e}))},stop:function(){i.iframe_close({},"network")}},i.iframe_close=function(e,l){t.cleanup(),i.iframe_close=t=null,delete window[utils.WPrefix][i.id],i.dispatchEvent(new SimpleEvent("close",{reason:l}))},t=l(e,function(){i.iframe_close({},"permanent")})}var utils=_dereq_("./utils"),SimpleEvent=_dereq_("./simpleevent"),REventTarget=_dereq_("./reventtarget"),_is_ie_htmlfile_capable,isIeHtmlfileCapable=function(){if(void 0===_is_ie_htmlfile_capable)if("ActiveXObject"in window)try{_is_ie_htmlfile_capable=!!new ActiveXObject("htmlfile")}catch(e){}else _is_ie_htmlfile_capable=!1;return _is_ie_htmlfile_capable};HtmlfileReceiver.prototype=new REventTarget,HtmlfileReceiver.prototype.abort=function(){var e=this;e.iframe_close&&e.iframe_close({},"user")},module.exports=HtmlfileReceiver;

},{"./reventtarget":9,"./simpleevent":10,"./utils":28}],22:[function(_dereq_,module,exports){
"use strict";function XhrReceiver(e,n){var t=this,r=0;t.xo=new n("POST",e,null),t.xo.onchunk=function(e,n){if(200===e)for(;;){var o=n.slice(r),i=o.indexOf("\n");if(-1===i)break;r+=i+1;var v=o.slice(0,i);t.dispatchEvent(new SimpleEvent("message",{data:v}))}},t.xo.onfinish=function(e,n){t.xo.onchunk(e,n),t.xo=null;var r=200===e?"network":"permanent";t.dispatchEvent(new SimpleEvent("close",{reason:r}))}}var SimpleEvent=_dereq_("./simpleevent"),REventTarget=_dereq_("./reventtarget");XhrReceiver.prototype=new REventTarget,XhrReceiver.prototype.abort=function(){var e=this;e.xo&&(e.xo.close(),e.dispatchEvent(new SimpleEvent("close",{reason:"user"})),e.xo=null)},module.exports=XhrReceiver;

},{"./reventtarget":9,"./simpleevent":10}],23:[function(_dereq_,module,exports){
"use strict";function WebSocketTransport(e,o){var n=this,s=o+"/websocket";s="https"===s.slice(0,5)?"wss"+s.slice(5):"ws"+s.slice(4),n.ri=e,n.url=s;var t=window.WebSocket||window.MozWebSocket;n.ws=new t(n.url),n.ws.onmessage=function(e){n.ri._didMessage(e.data)},n.unload_ref=utils.unload_add(function(){n.ws.close()}),n.ws.onclose=n.ws.onerror=function(){n.ri._didMessage(utils.closeFrame(1006,"WebSocket connection broken"))}}var utils=_dereq_("./utils");WebSocketTransport.prototype.doSend=function(e){this.ws.send("["+e+"]")},WebSocketTransport.prototype.doCleanup=function(){var e=this,o=e.ws;o&&(o.onmessage=o.onclose=o.onerror=null,o.close(),utils.unload_del(e.unload_ref),e.unload_ref=e.ri=e.ws=null)},WebSocketTransport.enabled=function(){return!(!window.WebSocket&&!window.MozWebSocket)},WebSocketTransport.roundTrips=2,module.exports=WebSocketTransport;

},{"./utils":28}],24:[function(_dereq_,module,exports){
"use strict";function XdrPollingTransport(r,e){this.run(r,e,"/xhr",XhrReceiver,XDRObject)}var AjaxBasedTransport=_dereq_("./ajax-based"),XdrStreamingTransport=_dereq_("./trans-xdr-streaming"),XhrReceiver=_dereq_("./trans-receiver-xhr"),XDRObject=_dereq_("./xdr");XdrPollingTransport.prototype=new AjaxBasedTransport,XdrPollingTransport.enabled=XdrStreamingTransport.enabled,XdrPollingTransport.roundTrips=2,module.exports=XdrPollingTransport;

},{"./ajax-based":2,"./trans-receiver-xhr":22,"./trans-xdr-streaming":25,"./xdr":29}],25:[function(_dereq_,module,exports){
"use strict";function XdrStreamingTransport(r,e){this.run(r,e,"/xhr_streaming",XhrReceiver,XDRObject)}var AjaxBasedTransport=_dereq_("./ajax-based"),XhrReceiver=_dereq_("./trans-receiver-xhr"),XDRObject=_dereq_("./xdr"),utils=_dereq_("./utils");XdrStreamingTransport.prototype=new AjaxBasedTransport,XdrStreamingTransport.enabled=function(r){return!!(window.XDomainRequest&&document.domain&&utils.isSameOriginScheme(r))},XdrStreamingTransport.roundTrips=2,module.exports=XdrStreamingTransport;

},{"./ajax-based":2,"./trans-receiver-xhr":22,"./utils":28,"./xdr":29}],26:[function(_dereq_,module,exports){
"use strict";function XhrPollingTransport(r,e){this.run(r,e,"/xhr",XhrReceiver,XHRCorsObject)}var AjaxBasedTransport=_dereq_("./ajax-based"),XhrReceiver=_dereq_("./trans-receiver-xhr"),XHRCorsObject=_dereq_("./xhr-cors"),utils=_dereq_("./utils");XhrPollingTransport.prototype=new AjaxBasedTransport,XhrPollingTransport.enabled=function(r){return window.XMLHttpRequest&&utils.isSameOriginUrl(r)?!0:1===utils.isXHRCorsCapable()},XhrPollingTransport.roundTrips=2,module.exports=XhrPollingTransport;

},{"./ajax-based":2,"./trans-receiver-xhr":22,"./utils":28,"./xhr-cors":30}],27:[function(_dereq_,module,exports){
"use strict";function XhrStreamingTransport(r,e){this.run(r,e,"/xhr_streaming",XhrReceiver,XHRCorsObject)}var AjaxBasedTransport=_dereq_("./ajax-based"),XhrReceiver=_dereq_("./trans-receiver-xhr"),XHRCorsObject=_dereq_("./xhr-cors"),utils=_dereq_("./utils");XhrStreamingTransport.prototype=new AjaxBasedTransport,XhrStreamingTransport.enabled=function(r){return/opera/i.test(navigator.userAgent)?!1:window.XMLHttpRequest&&utils.isSameOriginUrl(r)?!0:1===utils.isXHRCorsCapable()},XhrStreamingTransport.roundTrips=2,XhrStreamingTransport.need_body=!0,module.exports=XhrStreamingTransport;

},{"./ajax-based":2,"./trans-receiver-xhr":22,"./utils":28,"./xhr-cors":30}],28:[function(_dereq_,module,exports){
"use strict";var JSON3=_dereq_("json3"),utils={},getRandomBytes;getRandomBytes=window&&window.crypto&&window.crypto.getRandomValues?function(u){var n=new Uint8Array(u);return window.crypto.getRandomValues(n),n}:function(u){for(var n=new Uint8Array(u),e=0;u>e;e++)n[e]=Math.floor(256*Math.random());return n};var random_string_chars="abcdefghijklmnopqrstuvwxyz012345";utils.random_string=function(u){for(var n=random_string_chars.length,e=getRandomBytes(u),t=[],o=0;u>o;o++)t.push(random_string_chars[e[o]%n]);return t.join("")},utils.random_number=function(u){return Math.floor(Math.random()*u)},utils.random_number_string=function(u){var n=(""+(u-1)).length,e=new Array(n+1).join("0");return(e+utils.random_number(u)).slice(-n)},utils.getOrigin=function(u){if(u.match(/^file:\/\//))return null;var n,e,t=u.split("/"),o=t[0],r=t[2],i=r.lastIndexOf("@");return~i&&(r=r.slice(i+1)),t=r.split(":"),n=t[0],e=t[1],e||(e="https:"===o?443:80),o+"//"+n+":"+e},utils.isSameOriginUrl=function(u,n){return n||(n=window.location.href),utils.getOrigin(u)===utils.getOrigin(n)},utils.isSameOriginScheme=function(u,n){return n||(n=window.location.href),u.split(":")[0]===n.split(":")[0]},utils.getParentDomain=function(u){if(/^[0-9.]*$/.test(u))return u;if(/^\[/.test(u))return u;if(!/[.]/.test(u))return u;var n=u.split(".").slice(1);return n.join(".")},utils.objectExtend=function(u,n){for(var e in n)n.hasOwnProperty(e)&&(u[e]=n[e]);return u};var WPrefix=utils.WPrefix="_jp";utils.polluteGlobalNamespace=function(){WPrefix in window||(window[WPrefix]={})},utils.closeFrame=function(u,n){return"c"+JSON3.stringify([u,n])},utils.userSetCode=function(u){return 1e3===u||u>=3e3&&4999>=u},utils.countRTO=function(u){return u>100?4*u:300+u},utils.log=function(){window.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},utils.bind=function(u,n){return u.bind?u.bind(n):function(){return u.apply(n,arguments)}},utils.flatUrl=function(u){return-1===u.indexOf("?")&&-1===u.indexOf("#")},utils.amendUrl=function(u){var n=document.location;if(!u)throw new Error("Wrong url for SockJS");if(!utils.flatUrl(u))throw new Error("Only basic urls are supported in SockJS");0===u.indexOf("//")&&(u=n.protocol+u),0===u.indexOf("/")&&(u=n.protocol+"//"+n.host+u),u=u.replace(/[/]+$/,"");var e=u.split("/");return("http:"===e[0]&&/:80$/.test(e[2])||"https:"===e[0]&&/:443$/.test(e[2]))&&(e[2]=e[2].replace(/:(80|443)$/,"")),u=e.join("/")},utils.arrIndexOf=function(u,n){for(var e=0;e<u.length;e++)if(u[e]===n)return e;return-1},utils.arrSkip=function(u,n){var e=utils.arrIndexOf(u,n);if(-1===e)return u.slice();var t=u.slice(0,e);return t.concat(u.slice(e+1))},utils.isArray=Array.isArray||function(u){return"[object Array]"===Object.prototype.toString.call(u)},utils.delay=function(u,n){return"function"==typeof u&&(n=u,u=0),setTimeout(n,u)};var json_escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,json_lookup={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","­":"\\u00ad","؀":"\\u0600","؁":"\\u0601","؂":"\\u0602","؃":"\\u0603","؄":"\\u0604","܏":"\\u070f","឴":"\\u17b4","឵":"\\u17b5","‌":"\\u200c","‍":"\\u200d","‎":"\\u200e","‏":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","‪":"\\u202a","‫":"\\u202b","‬":"\\u202c","‭":"\\u202d","‮":"\\u202e"," ":"\\u202f","⁠":"\\u2060","⁡":"\\u2061","⁢":"\\u2062","⁣":"\\u2063","⁤":"\\u2064","⁥":"\\u2065","⁦":"\\u2066","⁧":"\\u2067","⁨":"\\u2068","⁩":"\\u2069","⁪":"\\u206a","⁫":"\\u206b","⁬":"\\u206c","⁭":"\\u206d","⁮":"\\u206e","⁯":"\\u206f","﻿":"\\ufeff","￰":"\\ufff0","￱":"\\ufff1","￲":"\\ufff2","￳":"\\ufff3","￴":"\\ufff4","￵":"\\ufff5","￶":"\\ufff6","￷":"\\ufff7","￸":"\\ufff8","￹":"\\ufff9","￺":"\\ufffa","￻":"\\ufffb","￼":"\\ufffc","�":"\\ufffd","￾":"\\ufffe","￿":"\\uffff"},extra_escapable=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,extra_lookup,quoteJSON=JSON3&&JSON3.stringify||function(u){return json_escapable.lastIndex=0,json_escapable.test(u)&&(u=u.replace(json_escapable,function(u){return json_lookup[u]})),'"'+u+'"'},unroll_lookup=function(u){var n,e={},t=[];for(n=0;65536>n;n++)t.push(String.fromCharCode(n));return u.lastIndex=0,t.join("").replace(u,function(u){return e[u]="\\u"+("0000"+u.charCodeAt(0).toString(16)).slice(-4),""}),u.lastIndex=0,e};utils.quote=function(u){var n=quoteJSON(u);return extra_escapable.lastIndex=0,extra_escapable.test(n)?(extra_lookup||(extra_lookup=unroll_lookup(extra_escapable)),n.replace(extra_escapable,function(u){return extra_lookup[u]})):n};var _all_protocols=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];utils.probeProtocols=function(u){for(var n={},e=0;e<_all_protocols.length;e++){var t=_all_protocols[e];n[t]=SockJS[t]&&SockJS[t].enabled(u)}return n},utils.detectProtocols=function(u,n,e){var t={},o=[];n&&n.length||(n=_all_protocols);for(var r=0;r<n.length;r++){var i=n[r];t[i]=u[i]}var a=function(u){var n=u.shift();t[n]?o.push(n):u.length>0&&a(u)};return e.websocket!==!1&&a(["websocket"]),t["xhr-streaming"]&&!e.null_origin?o.push("xhr-streaming"):!t["xdr-streaming"]||e.cookie_needed||e.null_origin?a(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),t["xhr-polling"]&&!e.null_origin?o.push("xhr-polling"):!t["xdr-polling"]||e.cookie_needed||e.null_origin?a(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o},utils.isXHRCorsCapable=function(){try{if(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest)return 1}catch(u){}return window.XDomainRequest&&document.domain?2:IframeTransport.enabled()?3:4};var MPrefix="_sockjs_global";utils.createHook=function(){var u="a"+utils.random_string(8);if(!(MPrefix in window)){var n={};window[MPrefix]=function(u){return u in n||(n[u]={id:u,del:function(){delete n[u]}}),n[u]}}return window[MPrefix](u)},utils.attachMessage=function(u){utils.attachEvent("message",u)},utils.attachEvent=function(u,n){"undefined"!=typeof window.addEventListener?window.addEventListener(u,n,!1):(document.attachEvent("on"+u,n),window.attachEvent("on"+u,n))},utils.detachMessage=function(u){utils.detachEvent("message",u)},utils.detachEvent=function(u,n){"undefined"!=typeof window.addEventListener?window.removeEventListener(u,n,!1):(document.detachEvent("on"+u,n),window.detachEvent("on"+u,n))};var on_unload={},after_unload=!1,trigger_unload_callbacks=function(){for(var u in on_unload)on_unload[u](),delete on_unload[u]},unload_triggered=function(){after_unload||(after_unload=!0,trigger_unload_callbacks())};utils.attachEvent("unload",unload_triggered),utils.unload_add=function(u){var n=utils.random_string(8);return on_unload[n]=u,after_unload&&utils.delay(trigger_unload_callbacks),n},utils.unload_del=function(u){u in on_unload&&delete on_unload[u]},utils.createIframe=function(u,n){var e,t,o=document.createElement("iframe"),r=function(){clearTimeout(e);try{o.onload=null}catch(u){}o.onerror=null},i=function(){o&&(r(),setTimeout(function(){o&&o.parentNode.removeChild(o),o=null},0),utils.unload_del(t))},a=function(u){o&&(i(),n(u))},f=function(u,n){try{o&&o.contentWindow&&setTimeout(function(){o.contentWindow.postMessage(u,n)},0)}catch(e){}};return o.src=u,o.style.display="none",o.style.position="absolute",o.onerror=function(){a("onerror")},o.onload=function(){clearTimeout(e),e=setTimeout(function(){a("onload timeout")},2e3)},document.body.appendChild(o),e=setTimeout(function(){a("timeout")},15e3),t=utils.unload_add(i),{post:f,cleanup:i,loaded:r}},utils.createHtmlfile=function(u,n){var e,t,o,r=new ActiveXObject("htmlfile"),i=function(){clearTimeout(e)},a=function(){r&&(i(),utils.unload_del(t),o.parentNode.removeChild(o),o=r=null,CollectGarbage())},f=function(u){r&&(a(),n(u))},l=function(u,n){try{o&&o.contentWindow&&setTimeout(function(){o.contentWindow.postMessage(u,n)},0)}catch(e){}};r.open(),r.write('<html><script>document.domain="'+document.domain+'";</script></html>'),r.close(),r.parentWindow[utils.WPrefix]=window[utils.WPrefix];var s=r.createElement("div");return r.body.appendChild(s),o=r.createElement("iframe"),s.appendChild(o),o.src=u,e=setTimeout(function(){f("timeout")},15e3),t=utils.unload_add(a),{post:l,cleanup:a,loaded:i}},utils.postMessage=function(u,n){parent!==window?parent.postMessage(utils.curr_window_id+u+(n||""),"*"):utils.log("Can't postMessage, no parent window.",u,n)},module.exports=utils;

},{"json3":33}],29:[function(_dereq_,module,exports){
"use strict";function XDRObject(t,e,n){var r=this;utils.delay(function(){r._start(t,e,n)})}var utils=_dereq_("./utils"),EventEmitter=_dereq_("./eventemitter");XDRObject.prototype=new EventEmitter(["chunk","finish"]),XDRObject.prototype._start=function(t,e,n){var r=this,o=new XDomainRequest;e+=(-1===e.indexOf("?")?"?":"&")+"t="+ +new Date;var i=o.ontimeout=o.onerror=function(){r.emit("finish",0,""),r._cleanup(!1)};o.onprogress=function(){r.emit("chunk",200,o.responseText)},o.onload=function(){r.emit("finish",200,o.responseText),r._cleanup(!1)},r.xdr=o,r.unload_ref=utils.unload_add(function(){r._cleanup(!0)});try{r.xdr.open(t,e),r.xdr.send(n)}catch(u){i()}},XDRObject.prototype._cleanup=function(t){var e=this;if(e.xdr){if(utils.unload_del(e.unload_ref),e.xdr.ontimeout=e.xdr.onerror=e.xdr.onprogress=e.xdr.onload=null,t)try{e.xdr.abort()}catch(n){}e.unload_ref=e.xdr=null}},XDRObject.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)},module.exports=XDRObject;

},{"./eventemitter":4,"./utils":28}],30:[function(_dereq_,module,exports){
"use strict";function XHRCorsObject(){var t=this,r=arguments;utils.delay(function(){t._start.apply(t,r)})}var AbstractXHRObject=_dereq_("./abstract-xhr"),utils=_dereq_("./utils");XHRCorsObject.prototype=new AbstractXHRObject,module.exports=XHRCorsObject;

},{"./abstract-xhr":1,"./utils":28}],31:[function(_dereq_,module,exports){
"use strict";function XHRLocalObject(t,e,c){var r=this;utils.delay(function(){r._start(t,e,c,{no_credentials:!0})})}var utils=_dereq_("./utils"),AbstractXHRObject=_dereq_("./abstract-xhr");XHRLocalObject.prototype=new AbstractXHRObject,module.exports=XHRLocalObject;

},{"./abstract-xhr":1,"./utils":28}],32:[function(_dereq_,module,exports){
"use strict";function XhrPollingITransport(r,e){this.run(r,e,"/xhr",XhrReceiver,XHRLocalObject)}var XhrReceiver=_dereq_("./trans-receiver-xhr"),XHRLocalObject=_dereq_("./xhr-local"),AjaxBasedTransport=_dereq_("./ajax-based");XhrPollingITransport.prototype=new AjaxBasedTransport,module.exports=XhrPollingITransport;

},{"./ajax-based":2,"./trans-receiver-xhr":22,"./xhr-local":31}],33:[function(_dereq_,module,exports){
(function (global){
(function(){function e(t,n){function c(e){if(c[e]!==d)return c[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=c("json-stringify")&&c("json-parse");else{var r,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l=n.stringify,s="function"==typeof l&&C;if(s){(r=function(){return 1}).toJSON=r;try{s="0"===l(0)&&"0"===l(new i)&&'""'==l(new a)&&l(v)===d&&l(d)===d&&l()===d&&"1"===l(r)&&"[1]"==l([r])&&"[null]"==l([d])&&"null"==l(null)&&"[null,null,null]"==l([d,v,null])&&l({a:[r,!0,!1,null,"\x00\b\n\f\r	"]})==o&&"1"===l(null,r)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new f(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new f(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new f(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new f(-1))}catch(u){s=!1}}t=s}if("json-parse"==e){var h=n.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){r=h(o);var p=5==r.a.length&&1===r.a[0];if(p){try{p=!h('"	"')}catch(u){}if(p)try{p=1!==h("01")}catch(u){}if(p)try{p=1!==h("1.")}catch(u){}}}}catch(u){p=!1}t=p}}return c[e]=!!t}t||(t=o.Object()),n||(n=o.Object());var i=t.Number||o.Number,a=t.String||o.String,l=t.Object||o.Object,f=t.Date||o.Date,s=t.SyntaxError||o.SyntaxError,u=t.TypeError||o.TypeError,h=t.Math||o.Math,p=t.JSON||o.JSON;"object"==typeof p&&p&&(n.stringify=p.stringify,n.parse=p.parse);var g,y,d,b=l.prototype,v=b.toString,C=new f(-0xc782b5b800cec);try{C=-109252==C.getUTCFullYear()&&0===C.getUTCMonth()&&1===C.getUTCDate()&&10==C.getUTCHours()&&37==C.getUTCMinutes()&&6==C.getUTCSeconds()&&708==C.getUTCMilliseconds()}catch(j){}if(!c("json")){var S="[object Function]",O="[object Date]",w="[object Number]",T="[object String]",A="[object Array]",_="[object Boolean]",N=c("bug-string-char-index");if(!C)var U=h.floor,J=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(e,t){return J[t]+365*(e-1970)+U((e-1969+(t=+(t>1)))/4)-U((e-1901+t)/100)+U((e-1601+t)/400)};if((g=b.hasOwnProperty)||(g=function(e){var t,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=v?g=function(e){var t=this.__proto__,r=e in(this.__proto__=null,this);return this.__proto__=t,r}:(t=r.constructor,g=function(e){var r=(this.constructor||t).prototype;return e in this&&!(e in r&&this[e]===r[e])}),r=null,g.call(this,e)}),y=function(e,t){var n,o,c,i=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,o=new n;for(c in o)g.call(o,c)&&i++;return n=o=null,i?y=2==i?function(e,t){var r,n={},o=v.call(e)==S;for(r in e)o&&"prototype"==r||g.call(n,r)||!(n[r]=1)||!g.call(e,r)||t(r)}:function(e,t){var r,n,o=v.call(e)==S;for(r in e)o&&"prototype"==r||!g.call(e,r)||(n="constructor"===r)||t(r);(n||g.call(e,r="constructor"))&&t(r)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],y=function(e,t){var n,c,i=v.call(e)==S,a=!i&&"function"!=typeof e.constructor&&r[typeof e.hasOwnProperty]&&e.hasOwnProperty||g;for(n in e)i&&"prototype"==n||!a.call(e,n)||t(n);for(c=o.length;n=o[--c];a.call(e,n)&&t(n));}),y(e,t)},!c("json-stringify")){var m={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},M="000000",k=function(e,t){return(M+(t||0)).slice(-e)},D="\\u00",E=function(e){for(var t='"',r=0,n=e.length,o=!N||n>10,c=o&&(N?e.split(""):e);n>r;r++){var i=e.charCodeAt(r);switch(i){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=m[i];break;default:if(32>i){t+=D+k(2,i.toString(16));break}t+=o?c[r]:e.charAt(r)}}return t+'"'},P=function(e,t,r,n,o,c,i){var a,l,f,s,h,p,b,C,j,S,N,J,m,M,D,Z;try{a=t[e]}catch(F){}if("object"==typeof a&&a)if(l=v.call(a),l!=O||g.call(a,"toJSON"))"function"==typeof a.toJSON&&(l!=w&&l!=T&&l!=A||g.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&1/0>a){if(x){for(h=U(a/864e5),f=U(h/365.2425)+1970-1;x(f+1,0)<=h;f++);for(s=U((h-x(f,0))/30.42);x(f,s+1)<=h;s++);h=1+h-x(f,s),p=(a%864e5+864e5)%864e5,b=U(p/36e5)%24,C=U(p/6e4)%60,j=U(p/1e3)%60,S=p%1e3}else f=a.getUTCFullYear(),s=a.getUTCMonth(),h=a.getUTCDate(),b=a.getUTCHours(),C=a.getUTCMinutes(),j=a.getUTCSeconds(),S=a.getUTCMilliseconds();a=(0>=f||f>=1e4?(0>f?"-":"+")+k(6,0>f?-f:f):k(4,f))+"-"+k(2,s+1)+"-"+k(2,h)+"T"+k(2,b)+":"+k(2,C)+":"+k(2,j)+"."+k(3,S)+"Z"}else a=null;if(r&&(a=r.call(t,e,a)),null===a)return"null";if(l=v.call(a),l==_)return""+a;if(l==w)return a>-1/0&&1/0>a?""+a:"null";if(l==T)return E(""+a);if("object"==typeof a){for(M=i.length;M--;)if(i[M]===a)throw u();if(i.push(a),N=[],D=c,c+=o,l==A){for(m=0,M=a.length;M>m;m++)J=P(m,a,r,n,o,c,i),N.push(J===d?"null":J);Z=N.length?o?"[\n"+c+N.join(",\n"+c)+"\n"+D+"]":"["+N.join(",")+"]":"[]"}else y(n||a,function(e){var t=P(e,a,r,n,o,c,i);t!==d&&N.push(E(e)+":"+(o?" ":"")+t)}),Z=N.length?o?"{\n"+c+N.join(",\n"+c)+"\n"+D+"}":"{"+N.join(",")+"}":"{}";return i.pop(),Z}};n.stringify=function(e,t,n){var o,c,i,a;if(r[typeof t]&&t)if((a=v.call(t))==S)c=t;else if(a==A){i={};for(var l,f=0,s=t.length;s>f;l=t[f++],a=v.call(l),(a==T||a==w)&&(i[l]=1));}if(n)if((a=v.call(n))==w){if((n-=n%1)>0)for(o="",n>10&&(n=10);o.length<n;o+=" ");}else a==T&&(o=n.length<=10?n:n.slice(0,10));return P("",(l={},l[""]=e,l),c,i,o,"",[])}}if(!c("json-parse")){var Z,F,$=a.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},I=function(){throw Z=F=null,s()},Y=function(){for(var e,t,r,n,o,c=F,i=c.length;i>Z;)switch(o=c.charCodeAt(Z)){case 9:case 10:case 13:case 32:Z++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=N?c.charAt(Z):c[Z],Z++,e;case 34:for(e="@",Z++;i>Z;)if(o=c.charCodeAt(Z),32>o)I();else if(92==o)switch(o=c.charCodeAt(++Z)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=H[o],Z++;break;case 117:for(t=++Z,r=Z+4;r>Z;Z++)o=c.charCodeAt(Z),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||I();e+=$("0x"+c.slice(t,Z));break;default:I()}else{if(34==o)break;for(o=c.charCodeAt(Z),t=Z;o>=32&&92!=o&&34!=o;)o=c.charCodeAt(++Z);e+=c.slice(t,Z)}if(34==c.charCodeAt(Z))return Z++,e;I();default:if(t=Z,45==o&&(n=!0,o=c.charCodeAt(++Z)),o>=48&&57>=o){for(48==o&&(o=c.charCodeAt(Z+1),o>=48&&57>=o)&&I(),n=!1;i>Z&&(o=c.charCodeAt(Z),o>=48&&57>=o);Z++);if(46==c.charCodeAt(Z)){for(r=++Z;i>r&&(o=c.charCodeAt(r),o>=48&&57>=o);r++);r==Z&&I(),Z=r}if(o=c.charCodeAt(Z),101==o||69==o){for(o=c.charCodeAt(++Z),(43==o||45==o)&&Z++,r=Z;i>r&&(o=c.charCodeAt(r),o>=48&&57>=o);r++);r==Z&&I(),Z=r}return+c.slice(t,Z)}if(n&&I(),"true"==c.slice(Z,Z+4))return Z+=4,!0;if("false"==c.slice(Z,Z+5))return Z+=5,!1;if("null"==c.slice(Z,Z+4))return Z+=4,null;I()}return"$"},B=function(e){var t,r;if("$"==e&&I(),"string"==typeof e){if("@"==(N?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=Y(),"]"!=e;r||(r=!0))r&&(","==e?(e=Y(),"]"==e&&I()):I()),","==e&&I(),t.push(B(e));return t}if("{"==e){for(t={};e=Y(),"}"!=e;r||(r=!0))r&&(","==e?(e=Y(),"}"==e&&I()):I()),(","==e||"string"!=typeof e||"@"!=(N?e.charAt(0):e[0])||":"!=Y())&&I(),t[e.slice(1)]=B(Y());return t}I()}return e},L=function(e,t,r){var n=q(e,t,r);n===d?delete e[t]:e[t]=n},q=function(e,t,r){var n,o=e[t];if("object"==typeof o&&o)if(v.call(o)==A)for(n=o.length;n--;)L(o,n,r);else y(o,function(e){L(o,e,r)});return r.call(e,t,o)};n.parse=function(e,t){var r,n;return Z=0,F=""+e,r=B(Y()),"$"!=Y()&&I(),Z=F=null,t&&v.call(t)==S?q((n={},n[""]=r,n),"",t):r}}}return n.runInContext=e,n}var t="function"==typeof define&&define.amd,r={"function":!0,object:!0},n=r[typeof exports]&&exports&&!exports.nodeType&&exports,o=r[typeof window]&&window||this,c=n&&r[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(o=c),n&&!t)e(o,n);else{var i=o.JSON,a=o.JSON3,l=!1,f=e(o,o.JSON3={noConflict:function(){return l||(l=!0,o.JSON=i,o.JSON3=a,i=a=null),f}});o.JSON={parse:f.parse,stringify:f.stringify}}t&&define(function(){return f})}).call(this);

}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[11])

(11)
});

